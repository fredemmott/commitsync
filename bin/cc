#!/bin/sh
# Copyright (c) 2020-present, Fred Emmott <fred@fredemmott.com>
# All rights reserved.
#
# This source code is licensed under the ISC license found in the LICENSE file
# in the root directory of this source tree.
#
# ---
#
# The most common user entry point; defaults to "pick a branch"

set -e

if [ -n "$1" ]; then
  MODE="$1"
  shift
else
  MODE="list"
fi

CC_BIN="$(dirname "$(realpath "$0")")"

case "$MODE" in
"list")
  exec "$CC_BIN/cc-list" "$@"
  ;;
"fetch")
  exec "$CC_BIN/cc-git" fetch commitcloud
  ;;
"git")
  exec "$CC_BIN/cc-git" "$@"
  ;;
"init")
  exec "$CC_BIN/cc-init" "$@"
  ;;
esac

echo "Usage: $0 [fetch|git|init|list]" >&2
exit 1
