#!/bin/sh
# Copyright (c) 2020-present, Fred Emmott <fred@fredemmott.com>
# All rights reserved.
#
# This source code is licensed under the ISC license found in the LICENSE file
# in the root directory of this source tree.
#
# ---
#
# Find the most recent remote for the current branch, or its' ancestors.
set -e

REFS="$(git for-each-ref refs/remotes/)"
for COMMIT in $(git rev-list HEAD); do
  echo "$REFS" | while read JOINED TYPE REF; do
    if [ "$JOINED" == "$COMMIT" ]; then
      echo "$REF"
      exit 0
    fi
  done
done
